(this["webpackJsonpedm-local-restaurants"]=this["webpackJsonpedm-local-restaurants"]||[]).push([[0],{150:function(e,t,a){e.exports=a(277)},155:function(e,t,a){},158:function(e,t,a){},277:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(30),s=a.n(o),i=(a(155),a(39)),l=a(33),c=a(34),u=a(53),h=a.n(u),d=a(97),m=a(23),p=a(24),f=a(278),g=a(286),v=(a(157),a(158),a(289)),y=a(40),b=a(100),k=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={activeIndex:0},e.handleClick=function(t,a){var n=a.index,r=e.state.activeIndex===n?-1:n;e.setState({activeIndex:r})},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this.state.activeIndex;return r.a.createElement(v.a,{styled:!0,fluid:!0},r.a.createElement(v.a.Title,{active:0===e,index:0,onClick:this.handleClick},"Welcome",r.a.createElement(y.a,{name:"dropdown"})),r.a.createElement(v.a.Content,{active:0===e},r.a.createElement("p",null,"Hello friends,"),r.a.createElement("p",null,"As you may know, the COVID19 crsis is hitting everyone hard, especially small businesses. We've put together a website listing many Asian restaurants in the Edmonton Area that still do delivery or pickups, because they have been hit particularly hard. This is not a comprehensive list of all Asian restarunts in Edmonton, we've been tracking via Google Sheets. Please feel free to submit more below. As the Alberta economy reopens in the coming months and after the COVID19 pandemic subsides, we hope this website will be a contineous way to share, support, and order from delicious Asian restaurants across Alberta."),r.a.createElement("p",null,"Click on the pins or on a row in the table to get started!"),r.a.createElement(b.a,{as:"a",color:"teal",href:"https://docs.google.com/spreadsheets/d/1YvbMUEEGha3hEQ6CDd0K1C4WVkAMmszbBRuRQ-ndxKU/edit?fbclid=IwAR0-PcTBQiVML5SDvJGDhYxiY3ya_gQOv8hQOKg4sX94gZpwvJW6hEnuLPE#gid=0"},"Google Sheets"),r.a.createElement(b.a,{as:"a",href:"https://github.com/shouyang/hungry-hippos"},"Github")))}}]),a}(r.a.Component);var E=function(){function e(t){function a(e){return t["gsx$".concat(e)].$t}Object(m.a)(this,e),this.id=t.id.$t,this.shouldBeShown=!0,this.name=a("name"),this.status=a("status"),this.cusine=a("cusine"),this.area=a("area"),this.hours=a("hours-unsureofcovid-19hours"),this.delivery=a("delivery"),this.pickup=a("pickup"),this.giftcards=a("giftcards"),this.dietaryNeeds=a("dietaryneedsserved"),this.address=a("address"),this.comments=a("comments"),this.website=a("website"),this.deliverySite=a("deliverysite"),this.fantuan=a("fantuan"),this.lat=a("lat"),this.long=a("long")}return Object(p.a)(e,[{key:"hasLocationData",value:function(){return!!this.lat&&!!this.long}},{key:"distanceToLocationMeters",value:function(e,t){return 1e3*function(e,t,a,n){var r=Math.sin,o=Math.cos,s=Math.sqrt,i=Math.atan2,l=Math.PI;function c(e){return e*l/180}var u=c(a-e),h=c(n-t),d=c(e),m=c(a),p=r(u/2)*r(u/2)+r(h/2)*r(h/2)*o(d)*o(m);return 6371*(2*i(s(p),s(1-p)))}(e,t,this.lat,this.long)}},{key:"googleMapsLink",get:function(){return"https://google.com/maps/search/".concat(this.address)}}]),e}(),w=a(17),O=a.n(w),j=a(285),C=a(291),S=a(292),R=a(293),M=a(290),D={iconSize:[18,25],iconAnchor:[12,25],popupAnchor:[1,-30],shadowSize:[25,25],shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png"},L=new O.a.Icon(Object(i.a)({},D,{iconUrl:"https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png"})),x=new O.a.Icon(Object(i.a)({},D,{iconUrl:"https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-yellow.png"})),A=new O.a.Icon(Object(i.a)({},D,{iconUrl:"https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png"})),I={Open:L,"Appears Closed":new O.a.Icon(Object(i.a)({},D,{iconUrl:"https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-orange.png"})),Closed:A,"":x},B=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).renderLocationMarker=function(t){var a=function(e,t){return r.a.createElement("div",null,r.a.createElement("b",null,e,": "),t||"--")},n=I[t.status]||x,o={as:"a",size:"tiny",color:"teal"},s=t.website?r.a.createElement(b.a,Object.assign({},o,{href:t.website}),"Website"):"",i=t.deliverySite?r.a.createElement(b.a,Object.assign({},o,{href:t.deliverySite}),"Delivery"):"",l=t.fantuan?r.a.createElement(b.a,Object.assign({},o,{href:t.fantuan}),"Fantuan"):"";return r.a.createElement(j.a,{ref:function(a){return e.props.setRef(t.name,a)},key:t.name,position:[t.lat,t.long],icon:n},r.a.createElement(C.a,null,r.a.createElement("h5",null,t.name),r.a.createElement("span",null,r.a.createElement(b.a,Object.assign({},o,{href:t.googleMapsLink}),"Google Maps")," ",s," ",i," ",l),r.a.createElement("hr",null),a("Address",t.address),a("Hours",t.hours),a("Cusine",t.cusine),a("Notes",t.comments)))},e}return Object(p.a)(a,[{key:"render",value:function(){var e=[this.props.lat,this.props.lng],t=this.props.locations.filter((function(e){return e.hasLocationData()&&e.shouldBeShown}));return r.a.createElement(S.a,{center:e,zoom:this.props.zoom},r.a.createElement(R.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),r.a.createElement(j.a,{position:e,draggable:!0,onDragend:this.props.handleMarkerDragEnd},r.a.createElement(C.a,null,r.a.createElement("p",null,'You can drag this around to filter for locations nearby! Alternatively, click on the "My Location" button to set this to your current location.'))),r.a.createElement(M.a,{center:e,radius:1e3*this.props.filterRadius}),t.map(this.renderLocationMarker.bind(this)))}}]),a}(r.a.Component),N=a(288),F=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).renderTableRow=function(t){var n=!!t.deliverySite,o=!!t.fantuan,s=!!t.deliverySite&&t.deliverySite.includes("ubereats.com");return r.a.createElement(N.a.Row,{key:t.name,className:"location-data-row",onClick:function(){return e.props.onRowClick(t.name)}},a.keysToInclude.map((function(e){return"delivery"===e&&n?r.a.createElement(N.a.Cell,null,r.a.createElement(b.a,{as:"a",href:t.deliverySite,color:s?"green":"red",size:"mini"},s?"UberEats":"SkipTheDishes"),o?r.a.createElement(b.a,{as:"a",href:t.fantuan,color:"yellow",size:"mini"},"Fantuan"):""):r.a.createElement(N.a.Cell,{key:"".concat(t.name,":").concat(e)},t[e])})))},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.locations.filter((function(e){return e.shouldBeShown}));return r.a.createElement(N.a,{compact:!0,size:"small"},r.a.createElement(N.a.Header,null,a.keysToInclude.map((function(e){return r.a.createElement(N.a.HeaderCell,{key:"header:".concat(e)},a.keysToColumnNames[e])}))),r.a.createElement(N.a.Body,null,e.map(this.renderTableRow)),";")}}]),a}(r.a.Component);F.keysToInclude=["name","status","cusine","hours","delivery","pickup","giftcards","dietaryNeeds","comments"],F.keysToColumnNames={name:"Business Name",status:"Status",cusine:"Cusine",hours:"Hours",delivery:"Delivery",pickup:"Pickup",giftcards:"Gift Cards",dietaryNeeds:"Diet Needs",address:"Address",comments:"Notes"};var z=F,G={spreadsheetID:"1YvbMUEEGha3hEQ6CDd0K1C4WVkAMmszbBRuRQ-ndxKU",worksheetID:"oc6o2es",get googleSheetsURL(){return"https://spreadsheets.google.com/feeds/list/".concat(this.spreadsheetID,"/").concat(this.worksheetID,"/public/values?alt=json")}},P="map-container",T="map-buttons",U="ui button",W={isFilterSet:!1,locations:[],lat:53.5461,lng:-113.4938,zoom:11,filterRadius:5},Q={type:"range",labelPosition:"right",min:1,max:10,step:.1},K={greenFloatLeft:{float:"left"},greenFloatRight:{float:"right"}},V="My Location",H=function(){function e(){Object(m.a)(this,e)}return Object(p.a)(e,null,[{key:"getLocationsFromGoogleSheets",value:function(){var e=Object(d.a)(h.a.mark((function e(){var t,a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(G.googleSheetsURL);case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,n=a.feed.entry,e.abrupt("return",n.map((function(e){return new E(e)})));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Y=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state=Object(i.a)({},W),e.mapPopupRefs=new Map,e.mapContainerRef=r.a.createRef(),e.setRef=function(t,a){e.mapPopupRefs.set(t,a)},e.resetLocationFilter=function(){var t=e.state.locations.map((function(e){return e.shouldBeShown=!0,e}));e.setState({locations:t})},e.openMapPopupByName=function(t){var a=e.mapPopupRefs.get(t);a&&a.leafletElement&&(a.leafletElement.openPopup(),e.mapContainerRef.current.scrollIntoView(!1))},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.populateLocationsFromGoogleSheets()}},{key:"populateLocationsFromGoogleSheets",value:function(){var e=Object(d.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,H.getLocationsFromGoogleSheets();case 3:e.t1=e.sent,e.t2={locations:e.t1},e.t0.setState.call(e.t0,e.t2);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(k,null),r.a.createElement("div",{ref:this.mapContainerRef,className:P},r.a.createElement(B,Object.assign({},this.state,{handleMarkerDragEnd:this.handleMarkerDragEnd.bind(this),setRef:this.setRef})),r.a.createElement("div",{className:T},r.a.createElement(f.a,{color:"teal",size:"small",className:U,style:K.greenFloatLeft,onClick:this.handleGetMyLocation.bind(this)},V),r.a.createElement(g.a,Object.assign({},Q,{label:{basic:!0,content:"Within ".concat(this.state.filterRadius," Km")},value:this.state.filterRadius,onChange:this.handleFilterRadiusChanged.bind(this),style:K.greenFloatLeft,size:"tiny",color:"teal"})),r.a.createElement(f.a,{color:"teal",size:"small",className:U,onClick:this.resetLocationFilter.bind(this),style:K.greenFloatRight},"Show All Locations"))),r.a.createElement(z,{locations:this.state.locations,onRowClick:this.openMapPopupByName.bind(this)}))}},{key:"handleGetMyLocation",value:function(){var e=this;navigator.geolocation.getCurrentPosition((function(t){var a=t.coords;e.setState({lat:a.latitude,lng:a.longitude}),e.filterByDistance()}),(function(e){alert("We couldn't seem to get your location. Did you enable some sort of privacy mode?")}))}},{key:"handleMarkerDragEnd",value:function(e){var t=e.target._latlng,a=t.lat,n=t.lng;this.setState({lat:a,lng:n}),this.filterByDistance()}},{key:"handleFilterRadiusChanged",value:function(e){this.setState({filterRadius:e.target.value}),this.filterByDistance()}},{key:"filterByDistance",value:function(){var e=this,t=this.state.locations.map((function(t){var a=t.distanceToLocationMeters(e.state.lat,e.state.lng);return t.shouldBeShown=a<=1e3*e.state.filterRadius,t}));this.setState({locations:t})}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[150,1,2]]]);
//# sourceMappingURL=main.d2f80407.chunk.js.map