(this["webpackJsonpedm-local-restaurants"]=this["webpackJsonpedm-local-restaurants"]||[]).push([[0],{150:function(e,t,a){e.exports=a(277)},155:function(e,t,a){},158:function(e,t,a){},277:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(30),i=a.n(o),s=(a(155),a(39)),l=a(33),c=a(34),u=a(53),h=a.n(u),d=a(96),m=a(23),p=a(24),f=a(278),g=a(286),v=(a(157),a(158),a(289)),y=a(40),b=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={activeIndex:0},e.handleClick=function(t,a){var n=a.index,r=e.state.activeIndex===n?-1:n;e.setState({activeIndex:r})},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this.state.activeIndex;return r.a.createElement(v.a,{styled:!0,fluid:!0},r.a.createElement(v.a.Title,{active:0===e,index:0,onClick:this.handleClick},"Welcome",r.a.createElement(y.a,{name:"dropdown"})),r.a.createElement(v.a.Content,{active:0===e},r.a.createElement("p",null,"Hello friends,"),r.a.createElement("p",null,"As y'all probably know, the COVID19 crisis is hitting everyone hard, especially small businesses. A lot of restaurants/food services are switching to takeout/delivery only, or closing. It'd be pretty sick if we could support them, so I've started a crowdsourcing spreadsheet for all the Asian restaurants/businesses in Edmonton that are open for pickup or takeout \ud83d\ude01 that everyone can use, or contribute to. I'd be pretty sad if all my fav places were closed in 2 months, so pls help a girl out and try to prevent that from happening."),r.a.createElement("p",null,"Click on the pins or on a row in the table to get started!")),r.a.createElement(v.a.Title,{active:1===e,index:1,onClick:this.handleClick},"About",r.a.createElement(y.a,{name:"dropdown"})),r.a.createElement(v.a.Content,{active:1===e},r.a.createElement("p",null,'You can drag the blue marker below to find nearby restaurants. You can also use the "My Location button" on compatible devices to go to your current location too!')))}}]),a}(r.a.Component);var k=function(){function e(t){function a(e){return t["gsx$".concat(e)].$t}Object(m.a)(this,e),this.id=t.id.$t,this.shouldBeShown=!0,this.name=a("name"),this.status=a("status"),this.cusine=a("cusine"),this.area=a("area"),this.hours=a("hours-unsureofcovid-19hours"),this.delivery=a("delivery"),this.pickup=a("pickup"),this.giftcards=a("giftcards"),this.dietaryNeeds=a("dietaryneedsserved"),this.address=a("address"),this.comments=a("comments"),this.website=a("website"),this.deliverySite=a("deliverysite"),this.fantuan=a("fantuan"),this.lat=a("lat"),this.long=a("long")}return Object(p.a)(e,[{key:"hasLocationData",value:function(){return!!this.lat&&!!this.long}},{key:"distanceToLocationMeters",value:function(e,t){return 1e3*function(e,t,a,n){var r=Math.sin,o=Math.cos,i=Math.sqrt,s=Math.atan2,l=Math.PI;function c(e){return e*l/180}var u=c(a-e),h=c(n-t),d=c(e),m=c(a),p=r(u/2)*r(u/2)+r(h/2)*r(h/2)*o(d)*o(m);return 6371*(2*s(i(p),i(1-p)))}(e,t,this.lat,this.long)}},{key:"googleMapsLink",get:function(){return"https://google.com/maps/search/".concat(this.address)}}]),e}(),E=a(17),w=a.n(E),C=a(285),j=a(291),S=a(292),O=a(293),R=a(290),M={iconSize:[18,25],iconAnchor:[12,25],popupAnchor:[1,-30],shadowSize:[25,25],shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png"},L=new w.a.Icon(Object(s.a)({},M,{iconUrl:"https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png"})),D=new w.a.Icon(Object(s.a)({},M,{iconUrl:"https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-yellow.png"})),x=new w.a.Icon(Object(s.a)({},M,{iconUrl:"https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png"})),I={Open:L,"Appears Closed":new w.a.Icon(Object(s.a)({},M,{iconUrl:"https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-orange.png"})),Closed:x,"":D},A=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).renderLocationMarker=function(t){var a=function(e,t){return r.a.createElement("div",null,r.a.createElement("b",null,e,": "),t||"--")},n=I[t.status]||D,o=t.website?r.a.createElement("a",{href:t.website},"ResturantWebsite"):"",i=t.deliverySite?r.a.createElement("a",{href:t.deliverySite},"Delivery"):"",s=t.fantuan?r.a.createElement("a",{href:t.fantuan},"Fantuan"):"";return r.a.createElement(C.a,{ref:function(a){return e.props.setRef(t.name,a)},key:t.name,position:[t.lat,t.long],icon:n},r.a.createElement(j.a,null,r.a.createElement("h5",null,t.name),r.a.createElement("span",null,r.a.createElement("a",{href:t.googleMapsLink},"GoogleMaps")," ",o," ",i," ",s),r.a.createElement("hr",null),a("Address",t.address),a("Hours",t.hours),a("Cusine",t.cusine),a("Notes",t.comments)))},e}return Object(p.a)(a,[{key:"render",value:function(){var e=[this.props.lat,this.props.lng],t=this.props.locations.filter((function(e){return e.hasLocationData()&&e.shouldBeShown}));return r.a.createElement(S.a,{center:e,zoom:this.props.zoom},r.a.createElement(O.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),r.a.createElement(C.a,{position:e,draggable:!0,onDragend:this.props.handleMarkerDragEnd},r.a.createElement(j.a,null,r.a.createElement("p",null,'You can drag this around to filter for locations nearby! Alternatively, click on the "My Location" button to set this to your current location.'))),r.a.createElement(R.a,{center:e,radius:1e3*this.props.filterRadius}),t.map(this.renderLocationMarker.bind(this)))}}]),a}(r.a.Component),N=a(288),B=a(99),F=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).renderTableRow=function(t){var n=!!t.deliverySite,o=!!t.fantuan,i=!!t.deliverySite&&t.deliverySite.includes("ubereats.com");return r.a.createElement(N.a.Row,{key:t.name,className:"location-data-row",onClick:function(){return e.props.onRowClick(t.name)}},a.keysToInclude.map((function(e){return"delivery"===e&&n?r.a.createElement(N.a.Cell,null,r.a.createElement(B.a,{as:"a",href:t.deliverySite,color:i?"green":"red",size:"mini"},i?"UberEats":"SkipTheDishes"),o?r.a.createElement(B.a,{as:"a",href:t.fantuan,color:"yellow",size:"mini"},"Fantuan"):""):r.a.createElement(N.a.Cell,{key:"".concat(t.name,":").concat(e)},t[e])})))},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.locations.filter((function(e){return e.shouldBeShown}));return r.a.createElement(N.a,{compact:!0,size:"small"},r.a.createElement(N.a.Header,null,a.keysToInclude.map((function(e){return r.a.createElement(N.a.HeaderCell,{key:"header:".concat(e)},a.keysToColumnNames[e])}))),r.a.createElement(N.a.Body,null,e.map(this.renderTableRow)),";")}}]),a}(r.a.Component);F.keysToInclude=["name","status","cusine","hours","delivery","pickup","giftcards","dietaryNeeds","comments"],F.keysToColumnNames={name:"Business Name",status:"Status",cusine:"Cusine",hours:"Hours",delivery:"Delivery",pickup:"Pickup",giftcards:"Gift Cards",dietaryNeeds:"Diet Needs",address:"Address",comments:"Notes"};var z=F,T={spreadsheetID:"1YvbMUEEGha3hEQ6CDd0K1C4WVkAMmszbBRuRQ-ndxKU",worksheetID:"oc6o2es",get googleSheetsURL(){return"https://spreadsheets.google.com/feeds/list/".concat(this.spreadsheetID,"/").concat(this.worksheetID,"/public/values?alt=json")}},P="map-container",U="map-buttons",G="ui button",W={isFilterSet:!1,locations:[],lat:53.5461,lng:-113.4938,zoom:11,filterRadius:5},H={type:"range",labelPosition:"right",min:1,max:10,step:.1},Y={greenFloatLeft:{backgroundColor:"limegreen",float:"left"},greenFloatRight:{backgroundColor:"limegreen",float:"right"}},$="My Location",K=function(){function e(){Object(m.a)(this,e)}return Object(p.a)(e,null,[{key:"getLocationsFromGoogleSheets",value:function(){var e=Object(d.a)(h.a.mark((function e(){var t,a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(T.googleSheetsURL);case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,n=a.feed.entry,e.abrupt("return",n.map((function(e){return new k(e)})));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),V=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state=Object(s.a)({},W),e.mapPopupRefs=new Map,e.mapContainerRef=r.a.createRef(),e.setRef=function(t,a){e.mapPopupRefs.set(t,a)},e.resetLocationFilter=function(){var t=e.state.locations.map((function(e){return e.shouldBeShown=!0,e}));e.setState({locations:t})},e.openMapPopupByName=function(t){var a=e.mapPopupRefs.get(t);a&&a.leafletElement&&(a.leafletElement.openPopup(),e.mapContainerRef.current.scrollIntoView(!1))},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.populateLocationsFromGoogleSheets()}},{key:"populateLocationsFromGoogleSheets",value:function(){var e=Object(d.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,K.getLocationsFromGoogleSheets();case 3:e.t1=e.sent,e.t2={locations:e.t1},e.t0.setState.call(e.t0,e.t2);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(b,null),r.a.createElement("div",{ref:this.mapContainerRef,className:P},r.a.createElement(A,Object.assign({},this.state,{handleMarkerDragEnd:this.handleMarkerDragEnd.bind(this),setRef:this.setRef})),r.a.createElement("div",{className:U},r.a.createElement(f.a,{size:"small",className:G,style:Y.greenFloatLeft,onClick:this.handleGetMyLocation.bind(this)},$),r.a.createElement(g.a,Object.assign({},H,{label:{basic:!0,content:"Within ".concat(this.state.filterRadius," Km")},value:this.state.filterRadius,onChange:this.handleFilterRadiusChanged.bind(this),style:Y.greenFloatLeft,size:"tiny"})),r.a.createElement(f.a,{size:"small",className:G,onClick:this.resetLocationFilter.bind(this),style:Y.greenFloatRight},"Show All Locations"))),r.a.createElement(z,{locations:this.state.locations,onRowClick:this.openMapPopupByName.bind(this)}))}},{key:"handleGetMyLocation",value:function(){var e=this;navigator.geolocation.getCurrentPosition((function(t){var a=t.coords;e.setState({lat:a.latitude,lng:a.longitude}),e.filterByDistance()}),(function(e){alert("We couldn't seem to get your location. Did you enable some sort of privacy mode?")}))}},{key:"handleMarkerDragEnd",value:function(e){var t=e.target._latlng,a=t.lat,n=t.lng;this.setState({lat:a,lng:n}),this.filterByDistance()}},{key:"handleFilterRadiusChanged",value:function(e){this.setState({filterRadius:e.target.value}),this.filterByDistance()}},{key:"filterByDistance",value:function(){var e=this,t=this.state.locations.map((function(t){var a=t.distanceToLocationMeters(e.state.lat,e.state.lng);return t.shouldBeShown=a<=1e3*e.state.filterRadius,t}));this.setState({locations:t})}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[150,1,2]]]);
//# sourceMappingURL=main.7fc08d2c.chunk.js.map